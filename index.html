<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pint Sized Fashions Gallery</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
  <style>
    /* ... your existing CSS ... */
  </style>
</head>
<body>
  <!-- ... your existing HTML ... -->
  <script>
    // --- getImageUrl function: add this at the top of your script ---
    function getImageUrl(path) {
      // If it's already a full URL, just use it
      if (/^(http|https):\/\//.test(path)) return path;
      if (!path) return '';
      const repoName = 'Gallery'; // Change if your repo name is different
      let base = '';
      if (window.location.hostname.endsWith('github.io')) {
        // On GitHub Pages, site is served from /Gallery/
        base = '/' + repoName + '/';
      } else {
        // On localhost, serve from root
        base = '/';
      }
      // Remove any leading slashes from path to avoid double-slash
      path = path.replace(/^\/+/, '');
      return base + path;
    }

    // --- PASSWORD PROTECTION ---
    const PASSWORD = "PSFPa55word!";
    const showBulkFormBtn = document.getElementById('showBulkFormBtn');
    const bulkFormContainer = document.getElementById('bulkFormContainer');
    const cancelBulkBtn = document.getElementById('cancelBulkBtn');
    let formUnlocked = false;

    showBulkFormBtn.addEventListener('click', function() {
      if (!formUnlocked) {
        const entered = prompt("Enter password to add/remove items:");
        if (entered === PASSWORD) {
          formUnlocked = true;
          bulkFormContainer.style.display = 'block';
          renderItems();
        } else {
          alert("Incorrect password!");
        }
      } else {
        bulkFormContainer.style.display = bulkFormContainer.style.display === 'block' ? 'none' : 'block';
      }
    });

    cancelBulkBtn.addEventListener('click', function() {
      bulkFormContainer.style.display = 'none';
      resetBulkForm();
    });

    // --- ITEM PERSISTENCE ---
    let items = JSON.parse(localStorage.getItem('psf_items') || '[]');

    // --- PRODUCT LIST RENDER ---
    const itemList = document.getElementById('itemList');
    function renderItems() {
      itemList.innerHTML = '';
      items.forEach((item, idx) => {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `
          <img class="item-image" src="${getImageUrl(item.imageUrl ? item.imageUrl : '')}" alt="Item Image">
          <div class="item-name">${item.name}</div>
          <div class="item-desc">${item.description}</div>
          <div class="item-price">$${item.price ? parseFloat(item.price).toFixed(2) : ''}</div>
          <button class="order-btn" data-name="${encodeURIComponent(item.name)}">Order</button>
          ${formUnlocked ? `<button class="remove-btn" data-idx="${idx}">Remove</button>` : ""}
        `;
        itemList.appendChild(div);
      });

      document.querySelectorAll('.order-btn').forEach(btn => {
        btn.onclick = function(e) {
          const itemName = decodeURIComponent(this.getAttribute('data-name'));
          try {
            localStorage.setItem('psf_item_name', itemName);
          } catch (err) {}
          const orderUrl = `https://psfashions.github.io/PintSizedFashions/Order%20Form.html?item=${encodeURIComponent(itemName)}`;
          window.open(orderUrl, '_blank');
        };
      });

      if (formUnlocked) {
        document.querySelectorAll('.remove-btn').forEach(btn => {
          btn.onclick = function() {
            const idx = parseInt(this.getAttribute('data-idx'));
            items.splice(idx, 1);
            localStorage.setItem('psf_items', JSON.stringify(items));
            renderItems();
          };
        });
      }
    }
    renderItems();

    // --- BULK ADD FUNCTIONALITY ---
    // ... rest of your JavaScript unchanged ...
  </script>
</body>
</html>